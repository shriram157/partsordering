<mvc:View controllerName="tci.wave2.ui.parts.ordering.controller.CheckOrderStatus" 
	xmlns:html="http://www.w3.org/1999/xhtml"	
	xmlns:core="sap.ui.core"  
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns:form="sap.ui.layout.form" 
	xmlns:layout="sap.ui.layout"
	xmlns:fb="sap.ui.comp.filterbar"
	xmlns:f="sap.f" 
	xmlns="sap.m"
	xmlns:vm="sap.ui.comp.variants"
	displayBlock="true" >
	<Page showNavButton="false" floatingFooter="false" enableScrolling = 'false'>
		<customHeader>
			<core:Fragment fragmentName="tci.wave2.ui.parts.ordering.view.fragments.TopHeader" type="XML"/>
		</customHeader>	
		<core:Fragment fragmentName="tci.wave2.ui.parts.ordering.view.fragments.ToolHeader" type="XML"/>
		
		<content>
			<Toolbar>
				<content>
					
					<Text text="{path : 'viewModel>/filteredItems', formatter:'.formatter.totalLine1' }" />
					<ToolbarSpacer />
					<SearchField placeholder='{i18n>Placeholder.CheckOrder.QuickSearch}' 
						showRefreshButton = 'true'
						showSearchButton = 'true'
						liveChange = 'onLiveChange'
						search = 'onSearch'
						width='60%' />	
					<Button id="settingButton"  icon="sap-icon://customize" type="Transparent" press="onSetting" />							
					<Button id="filterButton"  icon="sap-icon://add-filter" type="Transparent" press="onExpandFilter" />							
				</content>
			</Toolbar>
	
			<fb:FilterBar	reset="onReset" 
							header=""
							showClearOnFB="false"
							showRestoreOnFB="true"
							advancedMode = "true"
							filterBarExpanded="true"
							search="onSearch" 
							showRestoreButton="true" 
							showClearButton="true" 
							useToolbar='false' 
							showGoOnFB='false' 
							visible="{viewModel>/filterPanelEnable}" 
							showFilterConfiguration='false'>
				<fb:filterItems>
					<!--
					<fb:FilterItem name="orderType" label="{i18n>Label.CheckOrder.OrderType}" labelTooltip="{i18n>Label.CheckOrder.OrderType}" mandatory="false">
						<fb:control>
							<MultiComboBox 
								placeholder="{i18n>Label.CheckOrder.OrderType}"
								selectionFinish="onSelectionFinishOT"
								width="15%"
								selectedKeys= "{viewModel>/filters/orderStates}"
								items="{
									path: 'filterModel>/orderTypeList'
								}">
								<core:Item key="{filterModel>code}" text="{filterModel>name}" />
							</MultiComboBox>
						</fb:control>				
					</fb:FilterItem>
					<fb:FilterItem name="partStat" label="{i18n>Label.CheckOrder.PartsStat}" labelTooltip="{i18n>Label.CheckOrder.PartsStat}" >
						<fb:control>
							<MultiComboBox id="orderStatus"
								placeholder="{i18n>Label.CheckOrder.PartsStat}"
								selectionFinish="onSelectionFinishOS"
								selectedKeys= "{viewModel>/filters/partsStates}"
								width="15%"
								items="{
									path: 'filterModel>/partsStateList'
								}">
									<core:Item key="{filterModel>code}" text="{filterModel>name}" />
							</MultiComboBox>
						</fb:control>				
					</fb:FilterItem>				
					-->
					<fb:FilterItem name="dealer" label="{i18n>Label.CheckOrder.Dealer}" labelTooltip="{i18n>Label.CheckOrder.Dealer}" >
						<fb:control>
							<Input value="{viewModel>/filters/dealer}" enabled="false" placeholder="{i18n>Label.CheckOrder.Dealer}" width="15%"></Input>
						</fb:control>				
					</fb:FilterItem>
					<fb:FilterItem name="orderNumber" label="{i18n>Label.CheckOrder.DealerOrder}" labelTooltip="{i18n>Label.CheckOrder.DealerOrder}" >
						<fb:control>
							<Input value="{viewModel>/filters/orderNumber}" placeholder="{i18n>Label.CheckOrder.DealerOrder}" width="15%"></Input>
						</fb:control>				
					</fb:FilterItem>
					<fb:FilterItem name="partNumber" label="{i18n>Label.CheckOrder.PartsNumber}" labelTooltip="{i18n>Label.CheckOrder.PartsNumber}" >
						<fb:control>
							<Input type="Text" value="{viewModel>/filters/partNumber}" placeholder="{i18n>Label.CheckOrder.PartsNumber}" width="15%"></Input>
						</fb:control>				
					</fb:FilterItem>
					<fb:FilterItem name="orderDateFrom" label="{i18n>Label.CheckOrder.OrderDate.From}" labelTooltip="{i18n>Label.CheckOrder.OrderDate.From}" >
						<fb:control>
							<DatePicker value="{viewModel>/filters/fromOrderDate}"
										valueFormat="yyyyMMdd"
										displayFormat="long"
										placeholder="{i18n>Label.CheckOrder.OrderDate.From}"/>
						</fb:control>				
					</fb:FilterItem>

					<fb:FilterItem name="tciOrderNumber" label="{i18n>Label.CheckOrder.TciOrder}" labelTooltip="{i18n>Label.CheckOrder.TciOrder}" >
						<fb:control>
							<Input value="{viewModel>/filters/tciOrderNumber}" placeholder="{i18n>Label.CheckOrder.TciOrder}" width="15%"></Input>
						</fb:control>				
					</fb:FilterItem>
					<fb:FilterItem name="deleveryNumber" label="{i18n>Label.CheckOrder.deliveryNumber}" labelTooltip="{i18n>Label.CheckOrder.deliveryNumber}" >
						<fb:control>
							<Input value="{viewModel>/filters/deleveryNumber}" placeholder="{i18n>Label.CheckOrder.deliveryNumber}" width="15%"></Input>
						</fb:control>				
					</fb:FilterItem>
					<fb:FilterItem name="fiNumber" label="{i18n>Label.CheckOrder.fiNumber}" labelTooltip="{i18n>Label.CheckOrder.fiNumber}" >
						<fb:control>
							<Input value="{viewModel>/filters/fiNumber}" placeholder="{i18n>Label.CheckOrder.fiNumber}" width="15%"></Input>
						</fb:control>				
					</fb:FilterItem>

					<fb:FilterItem name="orderDateTo" label="{i18n>Label.CheckOrder.OrderDate.To}" labelTooltip="{i18n>Label.CheckOrder.OrderDate.To}" >
						<fb:control>
							<DatePicker value="{viewModel>/filters/toOrderDate}"
										valueFormat="yyyyMMdd"
										displayFormat="long"
										placeholder="{i18n>Label.CheckOrder.OrderDate.To}"/>
						</fb:control>				
					</fb:FilterItem>

				
				</fb:filterItems>
	    	</fb:FilterBar>		
	    	
			<Table id="idProductsTableHeader" showNoData="false"  >
				<columns>
					<Column width="10em" >
						<Text text="{i18n>Label.CheckOrder.PartsNumber} "/>
					</Column>
					<Column minScreenWidth="Tablet"	demandPopin="true" width="4em" hAlign="End">
						<Text text="{i18n>Label.CheckOrder.ShipFrom} "/>
					</Column>
					<Column minScreenWidth="Tablet"	demandPopin="true" width="2em" hAlign="Center">
						<core:Icon src="sap-icon://share" color='#FF5733' tooltip='{i18n>Label.CheckOrder.Substitution}' />
					</Column>
					<Column width="5em">
						<Text text="{i18n>Label.CheckOrder.Quantity.Ordered} "/>
					</Column>
					<Column width="5em">
						<Text text="{i18n>Label.CheckOrder.Quantity.InProcess} "/>
					</Column>
					<Column width="5em">
						<Text text="{i18n>Label.CheckOrder.Quantity.Processed} "/>
					</Column>
					<Column width="5em">
						<Text text="{i18n>Label.CheckOrder.Quantity.Cancelled} "/>
					</Column>
					<Column width="5em">
						<Text text="{i18n>Label.CheckOrder.Quantity.BackOrdered} "/>
					</Column>
					<Column	minScreenWidth="Tablet"	demandPopin="true">
						<Text text="{i18n>Label.CheckOrder.DealerOrder}" />
					</Column>
					<Column	minScreenWidth="Tablet"	demandPopin="true" hAlign="End">
						<Text text="{i18n>Label.CheckOrder.OrderType}" />
					</Column>
					<Column	minScreenWidth="Tablet"	demandPopin="true" hAlign="End">
						<Text text="{i18n>Label.CheckOrder.TciOrder}" />
					</Column>
				</columns>
			</Table>	
			<ScrollContainer id='flexContainer'
				height="{viewModel>/contHigh}"
				width="100%"
				horizontal="true"
				vertical="true"
				focusable="true">
				<Table	id="idProductsTable" growing='true'   growingThreshold='20'  growingScrollToLoad='true'
						alternateRowColors="true" mode="SingleSelectMaster"	
						selectionChange="onMasterSelected"
						items="{
								path: 'viewModel>/orders'
							}"
						sticky = "{['sap.m.Sticky.ColumnHeaders', 'sap.m.Sticky.HeaderToolbar','sap.m.Sticky.InfoToolbar']}"
					>
					<columns>
						<Column width="10em"/>
						<Column minScreenWidth="Tablet"	demandPopin="true" width="4em" hAlign="End"/>
						<Column minScreenWidth="Tablet"	demandPopin="true" width="2em" hAlign="Center"/>
						<Column width="5em"/>
						<Column width="5em"/>
						<Column width="5em"/>
						<Column width="5em"/>
						<Column width="5em"/>
						<Column	minScreenWidth="Tablet"	demandPopin="true"/>
						<Column	minScreenWidth="Tablet"	demandPopin="true" hAlign="End"/>
						<Column	minScreenWidth="Tablet"	demandPopin="true" hAlign="End"/>
					</columns>
					<items>
						<ColumnListItem>
							<cells>
								<ObjectIdentifier title="{path : 'viewModel>part_no', formatter:'.formatter.getItemNumber' }"/>
								<Text text="{path : 'viewModel>ship_from' }" />
								<core:Icon src="sap-icon://share" color='#FF5733' visible="{path : 'viewModel>sub_flag', formatter:'.formatter.sub2boolean'}" />
								<ObjectNumber number="{path: 'viewModel>quant_ordered', formatter:'.formatter.round2dec'}" />
								<ObjectNumber number="{path: 'viewModel>quant_in_process', formatter:'.formatter.round2dec' }"/>
								<ObjectNumber number="{path: 'viewModel>quant_processed', formatter:'.formatter.round2dec'}"/>
								<ObjectNumber number="{path: 'viewModel>quant_cancelled', formatter:'.formatter.round2dec'}"/>
								<ObjectNumber number="{path: 'viewModel>quant_back_ordered', formatter:'.formatter.round2dec'}"/>
								<ObjectIdentifier	title="{viewModel>dealer_orderNo}"/>
								<Text text="{path : 'viewModel>doc_type', formatter:'.formatter.orderTypeD' }" />
								<Text text="{path :'viewModel>TCI_order_no', formatter:'.formatter.getItemNumber'}" />
							</cells>
						</ColumnListItem>
					</items>
				</Table>
				<Toolbar>
					<content>
						<Text text="" />
					</content>
				</Toolbar>
			</ScrollContainer>

		</content>
		<footer>
			<OverflowToolbar>
				<Button 
					icon="sap-icon://message-popup" 
                    text="{=${message>/}.length}"
                    visible="{=${message>/}.length > 0}"
					type="Emphasized" 
					press="handleMessagePopoverPress"/>
				<ToolbarSpacer/>
			</OverflowToolbar>
		</footer>
	</Page>			
</mvc:View>