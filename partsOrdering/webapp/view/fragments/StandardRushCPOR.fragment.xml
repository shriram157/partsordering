<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" displayBlock="true" xmlns="sap.m" xmlns:ui="sap.ui.table">
	<Dialog title="CPOR" verticalScrolling='true' resizable="true" draggable="true"	horizontalScrolling='true'>
		<content>
			<ScrollContainer id='flexContainer' height="80%" width="100%" horizontal="true" vertical="true" focusable="true">
				<ui:Table id="idProductsTable" alternateRowColors="false" showNoData="false" rows="{orderModel>/items}" visibleRowCount="16"
					selectionMode="None" ariaLabelledBy="title" class="sapUiSizeCompact sapUiNoMarginTop sapUiNoMarginEnd" rowHeight="25px"
					sort="handleSortColumn">
					<ui:extension>
						<Toolbar class="customToolBar">
							<content>
								<Button type='Reject' icon="sap-icon://delete" tooltip="{i18n>ToolTip.CreateOrder.Delete.LineItem}" class="size2" press='handleDeletePart'
									visible="true"/>
							</content>
						</Toolbar>
					</ui:extension>
					<ui:columns>
						<ui:Column width="2rem">
							<Label text=""/>
							<ui:template>
								<CheckBox select='toggleSelect' wrapping="false" selected="{orderModel>selected}" visible="{= ${orderModel>line} > 0}"
									class="sapUiNoContentPadding"/>
							</ui:template>
						</ui:Column>
						<ui:Column width="{sizeModel>/remLine}" sortProperty="line">
							<Label text="#"/>
							<ui:template>
								<Text text="{orderModel>line}" wrapping="false" visible="{= ${orderModel>line} > 0}"/>
							</ui:template>
						</ui:Column>
						<ui:Column width="{sizeModel>/remPartNo}" id="Material" sortProperty="Material">
							<Label text="Part Number"/>
							<ui:template>
								<VBox>
									<Input value="{orderModel>partNumber}" type="Text" textFormatMode="Key" showSuggestion='true' suggest="handleSuggest"
										suggestionItemSelected="handleSuggestionItemSelected" change='handleProductChange' startSuggestion="3"
										suggestionItems="{path: 'materialSuggestionModel>/Matsuggestions', templateShareable:true}" maxSuggestionWidth='500px' width="340px"
										required="true" tooltip="{orderModel>partNumber}" visible="{= ${orderModel>line} === 0 || ${orderModel>line} ===''}">
										<suggestionItems>
											<core:ListItem key="{materialSuggestionModel>Material}" text="{materialSuggestionModel>Material}"
												additionalText="{materialSuggestionModel>MaterialName}"/>
										</suggestionItems>
									</Input>
									<ObjectIdentifier title="{ path : 'orderModel>partNumber'}" titleActive='true' titlePress='showPartAvailabilityInfo'
										visible="{= ${orderModel>line} > 0}"/>
								</VBox>
							</ui:template>
						</ui:Column>
						<ui:Column width="{sizeModel>/remPartDesc}">
							<Label text="Campaign Code"/>
								<ui:template >
								<Input value="{orderModel>partDesc}" enabled='false' valueState="None" tooltip="{orderModel>partDesc}" width="211px"/>
							</ui:template>
						</ui:Column>
						
						<ui:Column id="ErrorStatus" width="4.5rem">
							<ui:template>
								<VBox width="3.5rem">
									<Button type="Accept" tooltip="Add" class="size1" icon="sap-icon://add" press='handleAddPart'
										visible="{= ${orderModel>line} === 0 &amp;&amp; ${orderModel>addIcon} === true}"></Button>
									<core:Icon src="sap-icon://error" class="size1" color="#ff0000" visible='{= ${orderModel>line} === 0 ? false : ${orderModel>hasError}}'
										activeColor="Negative" alt="Error" press="onError"/>
									<ObjectMarker type="{orderModel>ItemStatus}" visible='{= ${orderModel>line} !== 0 &amp;&amp; ${orderModel>hasError} === false}'/>
								</VBox>
							</ui:template>
						</ui:Column>
					</ui:columns>
				</ui:Table>
			</ScrollContainer>
		</content>
		<buttons>
			<Button text="{i18n>Back}" press='onPressBack'/>
			<Button text="{i18n>CPOR}" press='CDialogClose'/>
		</buttons>
	</Dialog>
</core:FragmentDefinition>