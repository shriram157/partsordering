<mvc:View	controllerName="tci.wave2.ui.parts.ordering.controller.FindOrder" 
			xmlns:html="http://www.w3.org/1999/xhtml"	
			xmlns:core="sap.ui.core"  
			xmlns:mvc="sap.ui.core.mvc" 
			xmlns:form="sap.ui.layout.form" 
			xmlns:layout="sap.ui.layout" 
			xmlns:fb="sap.ui.comp.filterbar"
			xmlns:f="sap.f" 
			xmlns="sap.m"
			xmlns:vm="sap.ui.comp.variants"
			displayBlock="true">
	<Page showNavButton="false" floatingFooter="true" enableScrolling = 'true'>
		<customHeader>
			<core:Fragment fragmentName="tci.wave2.ui.parts.ordering.view.fragments.TopHeader" type="XML"/>
		</customHeader>	
		<core:Fragment fragmentName="tci.wave2.ui.parts.ordering.view.fragments.ToolHeader" type="XML"/>
	
		<content>
			<Toolbar>
				<content>
					<Text text="{path : 'viewModel>/filteredItems', formatter:'.formatter.totalDraft' }" />
					<ToolbarSpacer />
					<SearchField id="oidSearch" placeholder='{i18n>Placeholder.OrderNumber}' 
						showRefreshButton = 'true'
						liveChange='onLiveChange'
						search='onSearch'
						width='450px' />	
					<Button id="sortButton" type='Transparent' icon="sap-icon://sort" press="onSetting" />							
					<Button id="filterButton" type='Transparent' icon="sap-icon://add-filter" press="onExpandFilter" />					
				</content>
			</Toolbar>
	
			<fb:FilterBar	reset="onReset" 
							showRestoreButton="true" 
							showClearButton="false" 
							useToolbar='false' 
							showGoOnFB='fasle'
							advancedMode = "true"							
							visible="{viewModel>/filterPanelEnable}" 
							showFilterConfiguration='false'>
				<fb:filterItems>
					<fb:FilterItem name="A" label="{i18n>Label.Order.Type}" labelTooltip="{i18n>Label.Order.Type}" mandatory="true">
						<fb:control>
							<MultiComboBox id="orderType"
								placeholder="{i18n>Label.Order.Type}"
								selectionFinish="onSelectionFinishOT"
								selectionChange="onSelectChangeOT"								
								width="15%"
								selectedKeys= "{viewModel>/filters/orderStates}"
								items="{
									path: 'viewModel>/orderTypeList'
								}">
								<core:Item key="{viewModel>code}" text="{viewModel>name}" />
							</MultiComboBox>
						</fb:control>				
					</fb:FilterItem>
				</fb:filterItems>
	    	</fb:FilterBar>		
	
			
			<Table id="idProductsTableHeader" showNoData="false">
				<columns>
					<Column width="30%">
						<Label text="{i18n>Lable.Order.Number}" />
					</Column>
					<Column	width="20%" minScreenWidth="Tablet"	demandPopin="true" hAlign="Begin">
						<Label text="{i18n>Label.Order.Type}" />
					</Column>
					<Column	width="20%" minScreenWidth="Tablet"	demandPopin="true" hAlign="Center">
						<Label text="{i18n>Label.Order.Creation.Date}" />
					</Column>
					<Column	width="20%" minScreenWidth="Tablet"	demandPopin="false" hAlign="Center">
						<Label text="{i18n>Label.Order.Modification.Date}" />
					</Column>
					<Column	width="40px" hAlign="Center">
						<HBox justifyContent='End' alignItems='End'>
							<core:Icon id="addButton" src="sap-icon://add" color='#00bfff'	press="onAdd" />	
						</HBox>
					</Column>
				</columns>
			</Table>	
			
			<ScrollContainer id='flexContainer'
				height="{viewModel>/contHigh}"
				width="100%"
				horizontal="true"
				vertical="true"
				focusable="true">
				<Table	id="idProductsTable" 
						mode='SingleSelectMaster'
						updateFinished="onUpdateFinished"
						items="{
								path: 'viewModel>/orders',
								sorter: {
									path: 'createdOn'
								}
							}"
						sticky = "{['sap.m.Sticky.ColumnHeaders', 'sap.m.Sticky.HeaderToolbar','sap.m.Sticky.InfoToolbar']}"
					>
					<columns>
						<Column width="30%"/>
						<Column	width="20%" minScreenWidth="Tablet"	demandPopin="true" hAlign="Begin"/>
						<Column	width="20%" minScreenWidth="Tablet"	demandPopin="false" hAlign="Center"/>
						<Column	width="20%" minScreenWidth="Tablet"	demandPopin="true" hAlign="Center"/>
						<Column	width="36px" hAlign="End"/>
					</columns>
					<items>
						<ColumnListItem>
							<cells>
								<Link text="{viewModel>orderNumber}" enabled='false' />
								<Text text="{path : 'viewModel>scOrderType', formatter:'.formatter.orderType' }" />
								<Text text="{path:'viewModel>createdOn', formatter:'.formatter.shortDate'}" />
								<Text text="{path:'viewModel>modifiedOn', formatter:'.formatter.shortDate'}" />
								<HBox justifyContent='End' alignItems='End'>
									<core:Icon src="sap-icon://edit" color='#00bfff' press="onEdit" />
								</HBox>
							</cells>
						</ColumnListItem>
					</items>
				</Table>
				<Toolbar>
					<content>
						<Text text="" />
					</content>
				</Toolbar>
			</ScrollContainer>
		</content>

		<footer>
			<OverflowToolbar>
				<Button 
					icon="sap-icon://message-popup" 
                    text="{=${message>/}.length}"
                    visible="{=${message>/}.length > 0}"
					type="Emphasized" 
					press="handleMessagePopoverPress"/>
				<ToolbarSpacer/>
			</OverflowToolbar>
		</footer>
	</Page>			
</mvc:View>